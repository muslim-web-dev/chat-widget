
<!doctype html><html><head> <title>DoubleTick</title> <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <link rel="shortcut icon" href="https://storage.googleapis.com/tapthetable/assets/1970516/icon.png" /> <meta charset="utf-8"> <style>#root{margin: 0 auto !important;}#root, #root *{font-family: "Lato", "Helvetica Neue", "Roboto", sans-serif; max-width: 33rem !important;box-sizing: border-box !important;}.preheader { display:none !important; visibility:hidden; opacity:0; color:transparent; height:0; width:0; }.block{width: 100% !important; margin: 1.4rem 0 !important;}.text h2{color: #222 !important;}.img{width: 100%!important; max-width: 100% !important; height: auto !important;padding: 0!important;margin: 0!important;}.center{text-align: center;}.btt{font-size: 1.2rem; font-weight: bold; display: block; background-color: #007bff; color: white !important; padding: 0.8rem 2.5rem; border-radius: 0.4rem; cursor: pointer; text-decoration: none;}.py-2{padding-top: 1.2rem; padding-bottom: 1.2rem;}.footer{margin-top: 3rem; font-size: .8rem !important; color: #888 !important;}</style> </head><body><div id="root"><div class="block"><style>
    #root, #root * {
          max-width: 100% !important;
        }
    
    </style></div><div class="block"><!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>DoubleTick AI’s Visual Webchat Editor</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto|Open+Sans|Lato|Ubuntu&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    <style>
    :root {
        /* Colors */
        --primaryColor: #007bff;
        --secondaryColor: #ffffff;
    
        /* Font */
        --fontFamily: Helvetica, Arial, sans-serif;
        --fontWeight: bold;
    
        /* Header */
        --headerTextSize: 18px;
        --headerTextColor: #ffffff;
        --headerBackgroundLayers: #007bff;
        --headerHeight: 60px;
        --headerTextAlign: center;
        --cornerStyle: 20px;
        --headerPaddingLeft: 20px;
    
        /* Chat Area */
        --chatAreaBackgroundColor: #f8f9fa;
        --chatAreaBackgroundImage: none;
        --chatAreaBackgroundPosition: center;
        --chatAreaBackgroundRepeat: no-repeat;
        --chatAreaBackgroundSize: cover;
        --chatAreaGradient: none;
    
        /* Messages */
        --messageTextSize: 14px;
    
        /* User Message Corners & Borders */
        --userMessageCornerStyle: 20px;
        --userMessageBorderColor: #ffffff;
        --userMessageBorderThickness: 3px;
    
        /* Bot Message Corners & Borders */
        --botMessageCornerStyle: 20px;
        --botMessageBorderColor: #ffffff;
        --botMessageBorderThickness: 3px;
    
        /* Bot & User Colors */
        --botMessageTextColor: #212529;
        --botMessageBg: #eeeeee;
        --userMessageTextColor: #ffffff;
        --userMessageBg: #007bff;
    
        /* Avatar */
        --avatarSize: 50px;
        --avatarBorderColor: #007bff;
        --avatarBorderThickness: 3px;
        --avatarImageURL: url("https://via.placeholder.com/50");
        --avatarDisplay: inline-block;
        --avatarShape: 50%;
        --otherMessagePaddingLeft: calc(50px + 10px);
    
        /* Chat Input */
        --chatInputBackground: #ffffff;
        --chatInputTextFieldBg: #f1f1f1;
        --chatInputTextFieldTextColor: #333333;
        --chatInputBorderRadius: 18px;
        --chatInputHeight: 80px;
    
        /* Icon Settings */
        --iconsDisplay: inline-block;
        --iconsColor: #000000;
        --iconsColorSend: #000000;
    
        /* Button Styles */
        --buttonTextSize: var(--messageTextSize);
        --buttonFontWeight: var(--fontWeight);
        --buttonPadding: 10px 20px;
    }
    body {
        background-color: var(--secondaryColor);
        font-family: Arial, sans-serif; 
        height: 100vh;
        margin-top: 7px;
    }
    .container {
        display: flex;
        height: 98vh;
    }
    .controls {
        width: 300px;
        background: var(--secondaryColor);
        padding: 20px 5px 15px 0px;
        overflow-y: auto;
        border-right: 1px solid #e0e0e0;
        height: 100%;
    }
    .preview {
        flex: 1;
        background: var(--secondaryColor);
        display: flex;
        flex-direction: column;
        font-family: var(--fontFamily);
        height: 100%;
        overflow: hidden;
    }
    .section {
        margin-bottom: 24px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
    }
    .section-title {
        display: flex;
        align-items: center;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        color: white;
        padding: 10px 0px 10px 5px;
        border-bottom: 1px solid #e0e0e0;
        background: #007bff;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
    }
    .section-title .toggle-icon {
        margin-right: 10px;
        font-weight: bold;
    }
    .section-content {
        padding: 15px;
        display: none;
    }
    .control-group { margin-bottom: 12px; }
    label {
        display: block;
        margin-bottom: 6px;
        font-size: 14px;
        color: #4a5568;
    }
    select { cursor: pointer; }
    input, select, textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        margin-bottom: 8px;
        font-size: 14px;
    }
    input[type="color"] { height: 40px; padding: 0; }
    input[type="checkbox"] {
        transform: scale(1.2);
        margin-right: 10px;
        vertical-align: middle;
    }
    .color-input-group {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .color-input-group input[type="text"] {
        width: 80px;
        text-transform: uppercase;
    }
    .copy-button {
        width: 100%;
        padding: 10px;
        background: var(--primaryColor);
        color: var(--secondaryColor);
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s;
    }
    .copy-button:hover { background: #3986FF; }
    .reset-button {
        width: 100%;
        padding: 10px;
        background: #e74c3c;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s;
        margin-top: 20px;
    }
    .reset-button:hover { background: #c0392b; }
    .chat-preview-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        margin: 20px;
        border-radius: var(--cornerStyle);
        overflow: hidden;
        box-shadow: 0 0px 6px 3px rgba(0, 0, 0, 0.2);
        position: relative;
        font-family: var(--fontFamily);
        height: calc(100% - 40px);
    }
    .chat-header {
        height: var(--headerHeight);
        padding: 0 20px;
        font-size: var(--headerTextSize);
        font-weight: 600;
        background: var(--headerBackgroundLayers);
        color: var(--headerTextColor);
        text-align: var(--headerTextAlign);
        display: flex;
        align-items: center;
        justify-content: var(--headerTextAlign);
        border-top-left-radius: var(--cornerStyle);
        border-top-right-radius: var(--cornerStyle);
        font-family: var(--fontFamily);
        padding-left: var(--headerPaddingLeft);
        position: relative;
    }
    .chat-area {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        line-height: 1.5;
        font-family: var(--fontFamily);
        background-color: var(--chatAreaBackgroundColor);
        background-image: var(--chatAreaGradient), var(--chatAreaBackgroundImage);
        background-position: var(--chatAreaBackgroundPosition);
        background-repeat: var(--chatAreaBackgroundRepeat);
        background-size: var(--chatAreaBackgroundSize);
    }
    .other-message {
        position: relative;
        margin-bottom: 15px;
        padding-left: var(--otherMessagePaddingLeft);
    }
    .other-message:before {
        content: "";
        display: var(--avatarDisplay);
        position: absolute;
        top: 0;
        left: 0;
        width: var(--avatarSize);
        height: var(--avatarSize);
        background-image: var(--avatarImageURL);
        background-size: cover;
        background-repeat: no-repeat;
        border-radius: var(--avatarShape);
        border: var(--avatarBorderThickness) solid var(--avatarBorderColor);
    }
    .other-message .message-text {
        background-color: var(--botMessageBg);
        color: var(--botMessageTextColor);
        font-size: var(--messageTextSize);
        border-radius: var(--botMessageCornerStyle);
        padding: 10px 15px;
        word-wrap: break-word;
        font-family: var(--fontFamily);
        margin-bottom: 5px;
        border: var(--botMessageBorderThickness) solid var(--botMessageBorderColor);
    }
    .my-message {
        padding-right: 0;
        margin-bottom: 15px;
        position: relative;
    }
    .my-message .message-text {
        background-color: var(--userMessageBg) !important;
        color: var(--userMessageTextColor);
        font-size: var(--messageTextSize);
        border-radius: var(--userMessageCornerStyle);
        padding: 10px 15px;
        word-wrap: break-word;
        font-family: var(--fontFamily);
        margin-bottom: 5px;
        margin-top: 5vh;
        border: var(--userMessageBorderThickness) solid var(--userMessageBorderColor);
    }
    .my-message .message-text * {
        color: var(--userMessageTextColor) !important;
    }
    .other-message .message-text * {
        color: var(--botMessageTextColor);
    }
    .message-text * {
        font-family: inherit;
    }
    .chat-input {
        height: var(--chatInputHeight);
        padding: 10px;
        background: var(--chatInputBackground);
        display: flex;
        align-items: center;
        width: 100%;
        box-sizing: border-box;
        border-top: 0px solid #e0e0e0;
        font-family: var(--fontFamily);
    }
    .chat-input .input-group {
        /* 
         * Merged everything the persistent menu needs 
         * with your user-defined corner style & BG color.
         */
        flex: 1;
        border-radius: var(--chatInputBorderRadius) !important;
        background-color: var(--chatInputTextFieldBg) !important;
        overflow: visible; /* crucial for dropdown to show */
        position: relative; 
        display: flex;
        padding: 5px; /* margin for the persistent menu button */
    }
    .chat-input input {
        width: 100%;
        padding: 10px;
        border: none;
        background-color: var(--chatInputTextFieldBg);
        color: var(--chatInputTextFieldTextColor);
        font-size: 14px;
        outline: none;
        box-sizing: border-box;
        flex: 1;
    }
    .success-message {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #007bff;
        color: #fff;
        padding: 10px 20px;
        border-radius: 4px;
        font-size: 14px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
    }
    textarea#cssOutput {
        width: 100%;
        height: 200px;
        resize: vertical;
        font-family: monospace;
        font-size: 12px;
        padding: 10px;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        box-sizing: border-box;
        background-color: #f1f1f1;
        color: #333;
    }
    pre {
        color: var(--botMessageTextColor);
        line-height: 1.5;
        padding: 10px;
        font-weight: var(--buttonFontWeight);
        font-size: var(--messageTextSize);
        font-family: var(--fontFamily);
    }
    /* Chat Ice Breaker (You can remove from HTML if you don't need to preview it) */
    .chat-ice-breaker {
        position: fixed;
        right: 20px;
        bottom: 80px; 
    }
    .chat-ice-breaker button {
        position: relative;
        top: -20px!important;
        color: var(--botMessageTextColor);
        background-color: var(--botMessageBg);
        font-family: var(--fontFamily);
        font-weight: var(--buttonFontWeight);
        font-size: var(--buttonTextSize);
        padding: var(--buttonPadding);
        border-radius: 20px;
        border: none;
        border: 1px solid var(--primaryColor);
        cursor: pointer;
        margin: 5px 0;
        box-shadow: 0 4px 6px rgba(0,0,0,.1);
        transition: transform 0.2s ease, background-color 0.2s ease;
    }
    .chat-ice-breaker button:hover {
        background-color: var(--primaryColor);
        color: #fff;
        transform: scale(1.05);
    }
    .card-button {
        background: #E3F2FD;
        color: var(--botMessageTextColor);
        font-weight: var(--buttonFontWeight);
        font-size: var(--buttonTextSize);
        font-family: var(--fontFamily);
        padding: 10px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: transform 0.2s ease, background-color 0.2s ease;
        margin: 5px 0;
    }
    .card-button:hover {
        background-color: #d0e7f8;
        transform: scale(1.05);
    }
    .chat-input .form-control {
        border-radius: 0 !important;
        border: none !important;
        background-color: var(--chatInputTextFieldBg) !important;
        color: var(--chatInputTextFieldTextColor) !important;
    }
    .chat-input .input-group{
        background-color: var(--chatInputTextFieldBg) !important;
    }
    .input-group > .custom-select:not(:last-child),
    .input-group > .form-control:not(:last-child) {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 25px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 25px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 19px;
      width: 19px;
      left: 3px; bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #6b39ff;
    }
    input:checked + .slider:before {
      transform: translateX(24px);
    }
    .icon-container.active {
        display: flex; 
    }
    .icon-container {
        display: none; 
        gap: 25px;
        padding: 9px;
        width: max-content;
        position: absolute;
        left: calc(15% - 45px);
        z-index: 9999;
        font-size: 24px;
        color: var(--iconsColor);
        bottom: 20px;
        font-family: "Font Awesome 6 Free" !important;
    }
    i.fa-solid.fa-microphone:hover, i.fa-solid.fa-paperclip:hover {
        filter: invert(0.7);
    }
    i.fa-solid.fa-microphone {
        border-radius: 7px;
        font-family: "Font Awesome 6 Free" !important;
    }
    i.fa-solid.fa-paperclip {
        border-radius: 7px;
        font-family: "Font Awesome 6 Free" !important;
    }
    .icone-send i {
        font-size: 30px;
        color: var(--iconsColorSend);
        left: calc(98% - 45px);
        position: absolute;
        font-family: "Font Awesome 6 Free" !important;
        z-index: 55;
        bottom: 24px;
        rotate: 43deg;
    }
    input#slidergradientTransparency {
        padding: 0px;
    }
    </style>

    <link rel="stylesheet" href="./custom.css">
    </head>
    <body>
    <div class="container">
        <div class="controls">
          <!-- Header Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Header Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                    <label for="headerText">Header Text</label>
                    <input type="text" id="headerText" value="Chat Interface">
                </div>
                <div class="control-group">
                    <label for="headerTextSize">Header Text Size (px)</label>
                    <input type="range" id="headerTextSize" value="18" min="12" max="36">
                </div>
                <div class="control-group">
                    <label for="headerTextColor">Header Text Color</label>
                    <div class="color-input-group">
                        <input type="color" id="headerTextColor" value="#ffffff">
                        <input type="text" id="headerTextColorText" value="#ffffff" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="headerBackgroundType">Header Background Type</label>
                    <select id="headerBackgroundType">
                        <option value="solid" selected>Solid</option>
                        <option value="gradient">Gradient</option>
                    </select>
                </div>
                <div class="control-group" id="headerSolidColorGroup">
                    <label for="headerBgSolid">Header Background Color</label>
                    <div class="color-input-group">
                        <input type="color" id="headerBgSolid" value="#007bff">
                        <input type="text" id="headerBgSolidText" value="#007bff" maxlength="7">
                    </div>
                </div>
                <div class="control-group" id="headerGradientGroup" style="display: none;">
                    <label for="headerBgGradientStart">Gradient Start Color</label>
                    <div class="color-input-group">
                        <input type="color" id="headerBgGradientStart" value="#007bff">
                        <input type="text" id="headerBgGradientStartText" value="#007bff" maxlength="7">
                    </div>
                    <label for="headerBgGradientEnd">Gradient End Color</label>
                    <div class="color-input-group">
                        <input type="color" id="headerBgGradientEnd" value="#1abc9c">
                        <input type="text" id="headerBgGradientEndText" value="#1abc9c" maxlength="7">
                    </div>
                    <label for="headerBgGradientDirection">Gradient Direction</label>
                    <select id="headerBgGradientDirection">
                        <option value="to right" selected>To Right</option>
                        <option value="to bottom">To Bottom</option>
                        <option value="to left">To Left</option>
                        <option value="to top">To Top</option>
                        <option value="45deg">45 degrees</option>
                        <option value="135deg">135 degrees</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="headerHeight">Header Height (px)</label>
                    <input type="range" id="headerHeight" value="60" min="40" max="150">
                </div>
                <div class="control-group">
                    <label for="headerTextAlign">Text Alignment</label>
                    <select id="headerTextAlign">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="cornerStyle">Corner Style</label>
                    <select id="cornerStyle">
                        <option value="0px">Straight</option>
                        <option value="20px" selected>Rounded</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="headerLogoURL">Header Logo URL</label>
                    <input type="url" id="headerLogoURL" placeholder="https://example.com/logo.png">
                </div>
                <div class="control-group" id="headerLogoSizeGroup" style="display: none;">
                    <label for="headerLogoWidth">Logo Width (px)</label>
                    <input type="range" id="headerLogoWidth" value="40" min="10" max="200">
                </div>
                <div class="control-group" id="headerLogoPositionGroup" style="display: none;">
                    <label for="headerLogoAlignment">Logo Alignment</label>
                    <select id="headerLogoAlignment">
                        <option value="left" selected>Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                    </select>
                    <label for="headerLogoOffsetX">Logo Offset X (px)</label>
                    <input type="number" id="headerLogoOffsetX" value="0">
                    <label for="headerLogoOffsetY">Logo Offset Y (px)</label>
                    <input type="number" id="headerLogoOffsetY" value="0">
                </div>
            </div>
          </div>
          <!-- Chat Area Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Chat Area Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                    <label for="chatAreaBackgroundType">Chat Area Background Type</label>
                    <select id="chatAreaBackgroundType">
                        <option value="solid" selected>Solid</option>
                        <option value="gradient">Gradient</option>
                        <option value="image">Image</option>
                    </select>
                </div>
                <div class="control-group" id="chatAreaSolidColorGroup">
                    <label for="chatAreaBgSolid">Chat Area Background Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatAreaBgSolid" value="#f8f9fa">
                        <input type="text" id="chatAreaBgSolidText" value="#f8f9fa" maxlength="7">
                    </div>
                </div>
                <div class="control-group" id="chatAreaGradientGroup" style="display: none;">
                    <label for="chatAreaBgGradientStart">Gradient Start Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatAreaBgGradientStart" value="#f8f9fa">
                        <input type="text" id="chatAreaBgGradientStartText" value="#f8f9fa" maxlength="7">
                    </div>
                    <label for="chatAreaBgGradientEnd">Gradient End Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatAreaBgGradientEnd" value="#e0e0e0">
                        <input type="text" id="chatAreaBgGradientEndText" value="#e0e0e0" maxlength="7">
                    </div>
                    <label for="chatAreaBgGradientDirection">Gradient Direction</label>
                    <select id="chatAreaBgGradientDirection">
                        <option value="to right" selected>To Right</option>
                        <option value="to bottom">To Bottom</option>
                        <option value="to left">To Left</option>
                        <option value="to top">To Top</option>
                        <option value="45deg">45 degrees</option>
                        <option value="135deg">135 degrees</option>
                    </select>
                </div>
                <div class="control-group" id="chatAreaImageGroup" style="display: none;">
                    <label for="chatAreaBgImageURL">Background Image URL</label>
                    <input type="url" id="chatAreaBgImageURL" placeholder="https://example.com/image.jpg">
                    <label for="chatAreaBgSize">Background Size</label>
                    <select id="chatAreaBgSize">
                        <option value="cover">Cover</option>
                        <option value="contain">Contain</option>
                        <option value="auto">Auto</option>
                    </select>
                    <label for="chatAreaBgRepeat">Background Repeat</label>
                    <select id="chatAreaBgRepeat">
                        <option value="no-repeat">No Repeat</option>
                        <option value="repeat">Repeat</option>
                        <option value="repeat-x">Repeat Horizontally</option>
                        <option value="repeat-y">Repeat Vertically</option>
                    </select>
                </div>
                <div class="control-group" id="chatAreaTransparencyGroup" style="display: none;">
                    <label for="gradientSelector">Select Transparency</label>
                    <select id="gradientSelector">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                    <div class="slidergradientTransparency">
                        <label for="slidergradientTransparency">Transparency Intensity</label>
                        <input type="range" id="slidergradientTransparency" class="slidergradientTransparency" min="0" max="100" value="0">
                    </div>
                </div>
            </div>
          </div>
          <!-- Message Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Message Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                    <label for="messageTextSize">Message Text Size (px)</label>
                    <input type="range" id="messageTextSize" value="14" min="12" max="24">
                </div>
                <!-- Bot Message Corner Style -->
                <div class="control-group">
                    <label for="botMessageCornerStyleSelect">Bot Message Corner Style</label>
                    <select id="botMessageCornerStyleSelect">
                        <option value="0px">SHARP</option>
                        <option value="20px" selected>ROUNDED</option>
                        <option value="custom">CUSTOM</option>
                    </select>
                </div>
                <div class="control-group" id="customBotMessageCornerGroup" style="display: none;">
                    <label>Bot Message Custom Corners (top-left, top-right, bottom-right, bottom-left)</label>
                    <input type="text" id="customBotMessageCornerTopLeft" value="20px">
                    <input type="text" id="customBotMessageCornerTopRight" value="20px">
                    <input type="text" id="customBotMessageCornerBottomRight" value="20px">
                    <input type="text" id="customBotMessageCornerBottomLeft" value="20px">
                </div>
                <!-- Bot Message Border -->
                <div class="control-group">
                    <label for="botMessageBorderColor">Bot Message Border Color</label>
                    <div class="color-input-group">
                        <input type="color" id="botMessageBorderColor" value="#ffffff">
                        <input type="text" id="botMessageBorderColorText" value="#ffffff" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="botMessageBorderThickness">Bot Message Border Thickness (px)</label>
                    <input type="range" id="botMessageBorderThickness" value="3" min="0" max="10">
                </div>
                <div class="control-group">
                    <label for="botMessageTextColor">Bot Message Text Color</label>
                    <div class="color-input-group">
                        <input type="color" id="botMessageTextColor" value="#212529">
                        <input type="text" id="botMessageTextColorText" value="#212529" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="botMessageBg">Bot Message Background</label>
                    <div class="color-input-group">
                        <input type="color" id="botMessageBg" value="#eeeeee">
                        <input type="text" id="botMessageBgText" value="#eeeeee" maxlength="7">
                    </div>
                </div>
                <!-- User Message Corner Style -->
                <div class="control-group">
                    <label for="userMessageCornerStyleSelect">User Message Corner Style</label>
                    <select id="userMessageCornerStyleSelect">
                        <option value="0px">SHARP</option>
                        <option value="20px" selected>ROUNDED</option>
                        <option value="custom">CUSTOM</option>
                    </select>
                </div>
                <div class="control-group" id="customUserMessageCornerGroup" style="display: none;">
                    <label>User Message Custom Corners (top-left, top-right, bottom-right, bottom-left)</label>
                    <input type="text" id="customUserMessageCornerTopLeft" value="20px">
                    <input type="text" id="customUserMessageCornerTopRight" value="20px">
                    <input type="text" id="customUserMessageCornerBottomRight" value="20px">
                    <input type="text" id="customUserMessageCornerBottomLeft" value="20px">
                </div>
                <!-- User Message Border -->
                <div class="control-group">
                    <label for="userMessageBorderColor">User Message Border Color</label>
                    <div class="color-input-group">
                        <input type="color" id="userMessageBorderColor" value="#ffffff">
                        <input type="text" id="userMessageBorderColorText" value="#ffffff" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="userMessageBorderThickness">User Message Border Thickness (px)</label>
                    <input type="range" id="userMessageBorderThickness" value="3" min="0" max="10">
                </div>
                <div class="control-group">
                    <label for="userMessageTextColor">User Message Text Color</label>
                    <div class="color-input-group">
                        <input type="color" id="userMessageTextColor" value="#ffffff">
                        <input type="text" id="userMessageTextColorText" value="#ffffff" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="userMessageBg">User Message Background</label>
                    <div class="color-input-group">
                        <input type="color" id="userMessageBg" value="#007bff">
                        <input type="text" id="userMessageBgText" value="#007bff" maxlength="7">
                    </div>
                </div>
            </div>
          </div>
          <!-- Font Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Font Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                    <label for="fontFamily">Font Family</label>
                    <select id="fontFamily">
                        <option value="Helvetica, Arial, sans-serif" selected>Helvetica</option>
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Times New Roman', Times, serif">Times New Roman</option>
                        <option value="Georgia, serif">Georgia</option>
                        <option value="'Courier New', Courier, monospace">Courier New</option>
                        <option value="'Montserrat', sans-serif">Montserrat</option>
                        <option value="'Roboto', sans-serif">Roboto</option>
                        <option value="'Open Sans', sans-serif">Open Sans</option>
                        <option value="'Lato', sans-serif">Lato</option>
                        <option value="'Ubuntu', sans-serif">Ubuntu</option>
                    </select>
                </div>
            </div>
          </div>
          <!-- Avatar Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Avatar Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                   <label for="showAvatar">Show Avatar</label>
              <label class="switch">
                <input type="checkbox" id="showAvatar" checked>
                <span class="slider"></span>
              </label>
                </div>
                <div class="control-group">
                    <label for="avatarSize">Avatar Size (px)</label>
                    <input type="range" id="avatarSize" value="50" min="20" max="100">
                </div>
                <div class="control-group">
                    <label for="avatarBorderColor">Avatar Border Color</label>
                    <div class="color-input-group">
                        <input type="color" id="avatarBorderColor" value="#007bff">
                        <input type="text" id="avatarBorderColorText" value="#007bff" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="avatarBorderThickness">Avatar Border Thickness (px)</label>
                    <input type="range" id="avatarBorderThickness" value="3" min="0" max="10">
                </div>
                <div class="control-group">
                   <label for="avatarBorderTransparent">Transparent Border</label>
              <label class="switch">
                <input 
                  type="checkbox" 
                  id="avatarBorderTransparent"
                  onchange="
                    const avatarBorderColor = document.getElementById('avatarBorderColor');
                    if (this.checked) {
                      document.documentElement.style.setProperty('--avatarBorderColor', 'transparent');
                      avatarBorderColor.disabled = true; 
                    } else {
                      document.documentElement.style.setProperty('--avatarBorderColor', avatarBorderColor.value);
                      avatarBorderColor.disabled = false; 
                    }
                    generateCSS(); 
                    saveSettings();
                  "
                >
                <span class="slider"></span>
              </label>
                </div>
                <div class="control-group">
                    <label for="avatarImageURL">Avatar Image URL</label>
                    <input type="url" id="avatarImageURL" placeholder="https://example.com/avatar.jpg" value="https://via.placeholder.com/50">
                </div>
                <div class="control-group">
                    <label for="avatarShape">Avatar Shape</label>
                    <select id="avatarShape">
                        <option value="50%">Circle</option>
                        <option value="0%">Square</option>
                    </select>
                </div>
            </div>
          </div>
          <!-- Icon Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Icon Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                    <label for="showIcons">Show Microphone and Upload Icons</label>
                    <label class="switch">
                        <input type="checkbox" id="showIcons" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="control-group">
                    <label>Mic and Upload Icons Color:</label>
                    <div class="color-input-group">
                        <input type="color" id="icon-color" value="#000000">
                        <input type="text" id="iconColorText" value="#000000" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label>Send Icon Color:</label>
                    <div class="color-input-group">
                        <input type="color" id="icon-color-send" value="#000000">
                        <input type="text" id="iconColorSendText" value="#000000" maxlength="7">
                    </div>
                </div>
            </div>
          </div>
          <!-- Chat Input Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Chat Input Settings
            </div>
            <div class="section-content">
                <div class="control-group">
                    <label for="chatInputBackgroundType">Chat Input Background Type</label>
                    <select id="chatInputBackgroundType">
                        <option value="solid" selected>Solid</option>
                        <option value="gradient">Gradient</option>
                    </select>
                </div>
                <div class="control-group" id="chatInputSolidColorGroup">
                    <label for="chatInputBgSolid">Chat Input Background Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatInputBgSolid" value="#ffffff">
                        <input type="text" id="chatInputBgSolidText" value="#ffffff" maxlength="7">
                    </div>
                </div>
                <div class="control-group" id="chatInputGradientGroup" style="display: none;">
                    <label for="chatInputBgGradientStart">Chat Input Gradient Start Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatInputBgGradientStart" value="#ffffff">
                        <input type="text" id="chatInputBgGradientStartText" value="#ffffff" maxlength="7">
                    </div>
                    <label for="chatInputBgGradientEnd">Chat Input Gradient End Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatInputBgGradientEnd" value="#f1f1f1">
                        <input type="text" id="chatInputBgGradientEndText" value="#f1f1f1" maxlength="7">
                    </div>
                    <label for="chatInputBgGradientDirection">Gradient Direction</label>
                    <select id="chatInputBgGradientDirection">
                        <option value="to right" selected>To Right</option>
                        <option value="to bottom">To Bottom</option>
                        <option value="to left">To Left</option>
                        <option value="to top">To Top</option>
                        <option value="45deg">45°</option>
                        <option value="135deg">135°</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="chatInputTextFieldBg">Text Field Background Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatInputTextFieldBg" value="#f1f1f1">
                        <input type="text" id="chatInputTextFieldBgText" value="#f1f1f1" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="chatInputTextFieldTextColor">Text Field Text Color</label>
                    <div class="color-input-group">
                        <input type="color" id="chatInputTextFieldTextColor" value="#333333">
                        <input type="text" id="chatInputTextFieldTextColorText" value="#333333" maxlength="7">
                    </div>
                </div>
                <div class="control-group">
                    <label for="chatInputCornerStyle">Chat Input Corner Style</label>
                    <select id="chatInputCornerStyle">
                        <option value="0px">Straight</option>
                        <option value="18px" selected>Rounded</option>
                    </select>
                </div>
            </div>
          </div>
          <!-- Footer Settings -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Footer Settings
            </div>
            <div class="section-content">
                <label for="footer-show">Show Footer</label>
              <label class="switch">
                <input type="checkbox" id="footer-show" checked>
                <span class="slider"></span>
              </label>
                <br>
                <label>
                    Footer Text:
                    <input type="text" id="footer-text" value="Developed by DoubleTick AI">
                </label>
                <br>
                <label>
                    Footer Text Color:
                    <div class="color-input-group">
                        <input type="color" id="footer-text-color" value="#000">
                        <input type="text" id="footerTextColorText" value="#000000" maxlength="7">
                    </div>
                </label>
                <br>
                <label>
                    Footer Font Size (px):
                    <input type="range" id="footer-font-size" value="12">
                </label>
                <br>
                <label>
                    Footer Font Family:
                    <select id="footer-font-family">
                        <option value="sans-serif" selected>Sans-serif</option>
                        <option value="serif">Serif</option>
                        <option value="monospace">Monospace</option>
                    </select>
                </label>
                <br>
                <label>
                    Footer Font Weight:
                    <select id="footer-font-weight">
                        <option value="normal" selected>Normal</option>
                        <option value="bold">Bold</option>
                        <option value="lighter">Lighter</option>
                    </select>
                </label>
            </div>
          </div>
          <!-- Generated CSS -->
          <div class="section">
            <div class="section-title">
                <span class="toggle-icon">+</span>
                Generated CSS
            </div>
            <div class="section-content">
                <textarea id="cssOutput" readonly></textarea>
                <button class="copy-button" onclick="copyCSS()">Copy CSS</button>
            </div>
          </div>
          <!-- Reset Button -->
          <button class="reset-button" onclick="resetSettings()">Reset to Default</button>
        </div>
        <!-- Preview Area -->
        <div class="preview">
            <div class="chat-preview-container">
                <div class="chat-header">Chat Interface</div>
                <div class="chat-area">
                    <div class="other-message">
                        <div class="message-text">Hello! How can I assist you today?</div>
                    </div>
                    <div class="my-message">
                        <div class="message-text">I have a question about your service.</div>
                    </div>
                </div>
                <div class="chat-input">
                    <div class="icon-container">
                        <i class="fa-solid fa-microphone microphone-icon"></i>
                        <i class="fa-solid fa-paperclip uploadBtt"></i>
                    </div>
                    <div class="icone-send">
                        <i class="fa-solid fa-location-arrow"></i>
                    </div>
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Type your message...">
                    </div>
                </div>
            </div>
        </div>
        <div id="successMessage" class="success-message">CSS copied to clipboard!</div>
    </div>
    
    
    <script>
    const footerSettings = {
        showFooter: true,
        footerText: 'Developed by DoubleTick AI',
        footerTextColor: '#000000',
        footerFontSize: 12,
        footerFontFamily: 'sans-serif',
        footerFontWeight: 'normal',
    };
    
    function generateCSS() {
        const rootStyle = getComputedStyle(document.documentElement);
        let css = ':root{'+
            '--primaryColor:'+rootStyle.getPropertyValue('--primaryColor').trim()+';'+
            '--secondaryColor:'+rootStyle.getPropertyValue('--secondaryColor').trim()+';'+
            '--fontFamily:'+rootStyle.getPropertyValue('--fontFamily').trim()+';'+
            '--fontWeight:'+rootStyle.getPropertyValue('--fontWeight').trim()+';'+
            '--headerTextSize:'+rootStyle.getPropertyValue('--headerTextSize').trim()+';'+
            '--headerTextColor:'+rootStyle.getPropertyValue('--headerTextColor').trim()+';'+
            '--headerBackgroundLayers:'+rootStyle.getPropertyValue('--headerBackgroundLayers').trim()+';'+
            '--headerHeight:'+rootStyle.getPropertyValue('--headerHeight').trim()+';'+
            '--headerTextAlign:'+rootStyle.getPropertyValue('--headerTextAlign').trim()+';'+
            '--cornerStyle:'+rootStyle.getPropertyValue('--cornerStyle').trim()+';'+
            '--headerPaddingLeft:'+rootStyle.getPropertyValue('--headerPaddingLeft').trim()+';'+
            '--chatAreaBackgroundColor:'+rootStyle.getPropertyValue('--chatAreaBackgroundColor').trim()+';'+
            '--chatAreaGradient:'+rootStyle.getPropertyValue('--chatAreaGradient').trim()+';'+
            '--chatAreaBackgroundImage:'+rootStyle.getPropertyValue('--chatAreaBackgroundImage').trim()+';'+
            '--chatAreaBackgroundPosition:'+rootStyle.getPropertyValue('--chatAreaBackgroundPosition').trim()+';'+
            '--chatAreaBackgroundRepeat:'+rootStyle.getPropertyValue('--chatAreaBackgroundRepeat').trim()+';'+
            '--chatAreaBackgroundSize:'+rootStyle.getPropertyValue('--chatAreaBackgroundSize').trim()+';'+
            '--messageTextSize:'+rootStyle.getPropertyValue('--messageTextSize').trim()+';'+
            '--userMessageCornerStyle:'+rootStyle.getPropertyValue('--userMessageCornerStyle').trim()+';'+
            '--botMessageCornerStyle:'+rootStyle.getPropertyValue('--botMessageCornerStyle').trim()+';'+
            '--botMessageTextColor:'+rootStyle.getPropertyValue('--botMessageTextColor').trim()+';'+
            '--botMessageBg:'+rootStyle.getPropertyValue('--botMessageBg').trim()+';'+
            '--userMessageTextColor:'+rootStyle.getPropertyValue('--userMessageTextColor').trim()+';'+
            '--userMessageBg:'+rootStyle.getPropertyValue('--userMessageBg').trim()+';'+
            '--chatInputBackground:'+rootStyle.getPropertyValue('--chatInputBackground').trim()+';'+
            '--chatInputTextFieldBg:'+rootStyle.getPropertyValue('--chatInputTextFieldBg').trim()+';'+
            '--chatInputTextFieldTextColor:'+rootStyle.getPropertyValue('--chatInputTextFieldTextColor').trim()+';'+
            '--chatInputBorderRadius:'+rootStyle.getPropertyValue('--chatInputBorderRadius').trim()+';'+
            '--iconsDisplay:'+rootStyle.getPropertyValue('--iconsDisplay').trim()+';'+
            '--iconsColor:'+rootStyle.getPropertyValue('--iconsColor').trim()+';'+
            '--iconsColorSend:'+rootStyle.getPropertyValue('--iconsColorSend').trim()+';'+
            '--buttonTextSize:'+rootStyle.getPropertyValue('--buttonTextSize').trim()+';'+
            '--buttonFontWeight:'+rootStyle.getPropertyValue('--buttonFontWeight').trim()+';'+
            '--buttonPadding:'+rootStyle.getPropertyValue('--buttonPadding').trim()+';'+
            '--chatInputHeight:'+rootStyle.getPropertyValue('--chatInputHeight').trim()+';'+
            '--avatarSize:'+rootStyle.getPropertyValue('--avatarSize').trim()+';'+
            '--avatarBorderColor:'+rootStyle.getPropertyValue('--avatarBorderColor').trim()+';'+
            '--avatarBorderThickness:'+rootStyle.getPropertyValue('--avatarBorderThickness').trim()+';'+
            '--avatarImageURL:'+rootStyle.getPropertyValue('--avatarImageURL').trim()+';'+
            '--avatarDisplay:'+rootStyle.getPropertyValue('--avatarDisplay').trim()+';'+
            '--avatarShape:'+rootStyle.getPropertyValue('--avatarShape').trim()+';'+
            '--otherMessagePaddingLeft:'+rootStyle.getPropertyValue('--otherMessagePaddingLeft').trim()+';'+
            '--userMessageBorderColor:'+rootStyle.getPropertyValue('--userMessageBorderColor').trim()+';'+
            '--userMessageBorderThickness:'+rootStyle.getPropertyValue('--userMessageBorderThickness').trim()+';'+
            '--botMessageBorderColor:'+rootStyle.getPropertyValue('--botMessageBorderColor').trim()+';'+
            '--botMessageBorderThickness:'+rootStyle.getPropertyValue('--botMessageBorderThickness').trim()+';}';
    
        // Footer insertion
        if (footerSettings && footerSettings.showFooter) {
            css += '.chat-input:before{content:"'+footerSettings.footerText+'";position:absolute;bottom:1px;color:'+footerSettings.footerTextColor+';font-size:'+footerSettings.footerFontSize+'px;font-family:'+footerSettings.footerFontFamily+';font-weight:'+footerSettings.footerFontWeight+';padding:1px 5px;left:50%;transform:translateX(-50%);white-space:nowrap;}';
            css += '.d-flex.align-items-center.w-100{padding-bottom:2vh;}';
        }
    
        // Existing styles
        css += 'pre{color:var(--botMessageTextColor);line-height:1.5;padding:10px;font-weight:var(--buttonFontWeight);font-size:var(--messageTextSize);font-family:var(--fontFamily);}';
        css += '.chat-header{font-size:var(--headerTextSize);color:var(--headerTextColor);background:var(--headerBackgroundLayers);height:var(--headerHeight);text-align:var(--headerTextAlign);display:flex;align-items:center;justify-content:var(--headerTextAlign);font-family:var(--fontFamily);border-top-left-radius:var(--cornerStyle);border-top-right-radius:var(--cornerStyle);padding-left:var(--headerPaddingLeft);}';
        css += '.chat-input path{fill:var(--iconsColor)!important;}';
        css += '.chat-area{height:calc(92% - var(--headerHeight));position:absolute;top:var(--headerHeight);flex:1;padding:0;overflow-y:auto;line-height:1.5;font-family:var(--fontFamily);background-color:var(--chatAreaBackgroundColor);background-image:var(--chatAreaGradient),var(--chatAreaBackgroundImage);background-position:var(--chatAreaBackgroundPosition);background-repeat:var(--chatAreaBackgroundRepeat);background-size:var(--chatAreaBackgroundSize);}';
        css += '.other-message{position:relative;margin-bottom:10px;padding-left:var(--otherMessagePaddingLeft);}';
        css += '.other-message:before{content:"";display:var(--avatarDisplay);position:absolute;top:0;left:0;width:var(--avatarSize);height:var(--avatarSize);background-image:var(--avatarImageURL);background-size:cover;background-repeat:no-repeat;border-radius:var(--avatarShape);border:var(--avatarBorderThickness) solid var(--avatarBorderColor);}';
        css += '.other-message .message-text{background-color:var(--botMessageBg);color:var(--botMessageTextColor);font-size:var(--messageTextSize);border-radius:var(--botMessageCornerStyle);word-wrap:break-word;font-family:var(--fontFamily);margin-bottom:5px;padding:10px 15px;border:var(--botMessageBorderThickness) solid var(--botMessageBorderColor);}';
        css += '.other-message .message-text *{color:var(--botMessageTextColor);}';
        css += '.my-message{padding-right:0;margin-bottom:10px;position:relative;}';
        css += '.my-message .message-text{background-color:var(--userMessageBg)!important;color:var(--userMessageTextColor);font-size:var(--messageTextSize);border-radius:var(--userMessageCornerStyle);word-wrap:break-word;font-family:var(--fontFamily);margin-bottom:5px;margin-top:5vh;padding:10px 15px;border:var(--userMessageBorderThickness) solid var(--userMessageBorderColor);}';
        css += '.my-message .message-text *{color:var(--userMessageTextColor)!important;}';
        css += '.message-text *{font-family:inherit;}';
        css += '.chat-input{height:var(--chatInputHeight);padding:20px;background:var(--chatInputBackground);display:flex;align-items:center;width:100%;box-sizing:border-box;border-top:0 solid #e0e0e0;font-family:var(--fontFamily);}';
    
        // The single, merged .input-group rule that ensures
        // user-chosen colors/corner AND allows persistent menu to show
        css += '.chat-input .input-group{flex:1;border-radius:var(--chatInputBorderRadius)!important;background-color:var(--chatInputTextFieldBg)!important;overflow:visible;position:relative;display:flex;padding:5px;}';
    
        css += '.chat-input input{width:100%;padding:10px;border:none;background-color:var(--chatInputTextFieldBg);color:var(--chatInputTextFieldTextColor);font-size:14px;outline:none;box-sizing:border-box;flex:1;}';
        css += '.chat-input .form-control{background:var(--chatInputTextFieldBg)!important;}';
        css += 'button.btn.uploadBtt.bg-light-hover:hover{background:#ffffff42;filter:invert(0.7);}';
        css += 'path#path2{fill:var(--iconsColorSend)!important;}';
        css += '.bg-light-hover:hover{background-color:unset!important;}';
        css += '.btn-outline-primary{color:var(--botMessageTextColor)!important;border-color:var(--primaryColor)!important;background-color:var(--botMessageBg);}';
    
        // Hide icons if user toggles them off
        const showIcons = document.getElementById('showIcons').checked;
        if (!showIcons) {
            css += '.uploadBtt,.microphone-icon{display:none!important;}';
        }
    
        // -------------------------------------------
        // RULES FOR ICE BREAKER & PERSISTENT MENU
        // -------------------------------------------
        // Chat Ice Breaker button styles
        css += '.chat-ice-breaker .btn{position:relative;top:-20px!important;color:#000000;background-color:var(--botMessageBg);font-family:var(--fontFamily);font-size:var(--buttonTextSize);font-weight:var(--buttonFontWeight);padding:var(--buttonPadding);border-radius:20px;border:1px solid var(--primaryColor);cursor:pointer;box-shadow:0 4px 6px rgba(0,0,0,.1);margin:5px 0;transition:transform 0.2s ease,background-color 0.2s ease;}';
        css += '.chat-ice-breaker .btn:hover{background-color:var(--primaryColor);color:#fff;transform:scale(1.05);}';
    
        // Persistent menu button & dropdown
        css += '.chat-input .btn.dropdown-toggle{position:relative;color:var(--botMessageTextColor);font-family:var(--fontFamily);font-size:16px;z-index:10000;cursor:pointer;border:none;border-radius:5px;}';
        css += '.chat-input .dropdown-menu{position:absolute;top:calc(100% - 10px);left:0;background-color:var(--botMessageBg);color:var(--botMessageTextColor);font-size:16px;z-index:10000;pointer-events:auto;min-width:160px;border:0px solid var(--primaryColor);border-radius:5px;box-shadow:0 4px 6px rgba(0,0,0,.1);font-family:var(--fontFamily);}';
        css += '.chat-input .dropdown-menu .dropdown-item{background-color:var(--botMessageBg);color:var(--botMessageTextColor);font-size:16px;padding:10px;cursor:pointer;border-radius:3px;font-family:var(--fontFamily);}';
        css += '.chat-input .dropdown-menu .dropdown-item:hover{background-color:var(--primaryColor);color:#fff;}';
    
        // -------------------------------------------
        // MINIFY ONLY THE GENERATED CSS STRING
        // -------------------------------------------
        css = css.replace(/\n/g,' ').replace(/\s\s+/g,' ');
        document.getElementById('cssOutput').value = css.trim();
    }
    
    function updatePreview() {
        const root = document.documentElement.style;
    
        const headerTextSize = document.getElementById('headerTextSize').value + 'px';
        const headerTextColor = document.getElementById('headerTextColor').value;
        const headerHeightValue = document.getElementById('headerHeight').value;
        const headerHeight = headerHeightValue + 'px';
        const headerTextAlign = document.getElementById('headerTextAlign').value;
        const cornerStyle = document.getElementById('cornerStyle').value;
        let fontFamily = document.getElementById('fontFamily').value;
        const headerBackgroundType = document.getElementById('headerBackgroundType').value;
        const headerText = document.getElementById('headerText').value;
    
        root.setProperty('--headerTextSize', headerTextSize);
        root.setProperty('--headerTextColor', headerTextColor);
        root.setProperty('--headerHeight', headerHeight);
        root.setProperty('--headerTextAlign', headerTextAlign);
        root.setProperty('--cornerStyle', cornerStyle);
        root.setProperty('--fontFamily', fontFamily);
    
        document.querySelector('.chat-header').textContent = headerText;
    
        document.querySelectorAll('.preview, .chat-preview-container, .chat-header, .chat-area, .chat-input, .message-text, pre, .card-button').forEach(el => {
            el.style.fontFamily = root.getPropertyValue('--fontFamily').trim();
            el.style.fontWeight = 'bold';
        });
    
        let headerBackgroundLayer = '';
        if (headerBackgroundType === 'solid') {
            const headerBgSolid = document.getElementById('headerBgSolid').value;
            headerBackgroundLayer = headerBgSolid;
        } else {
            const headerBgGradientStart = document.getElementById('headerBgGradientStart').value;
            const headerBgGradientEnd = document.getElementById('headerBgGradientEnd').value;
            const headerBgGradientDirection = document.getElementById('headerBgGradientDirection').value;
            headerBackgroundLayer = 'linear-gradient('+headerBgGradientDirection+','+headerBgGradientStart+','+headerBgGradientEnd+')';
        }
    
        const headerLogoURL = document.getElementById('headerLogoURL').value;
        const headerLogoWidth = document.getElementById('headerLogoWidth').value || '40';
        const headerLogoAlignment = document.getElementById('headerLogoAlignment').value || 'left';
        const headerLogoOffsetX = document.getElementById('headerLogoOffsetX').value || '0';
        const headerLogoOffsetY = document.getElementById('headerLogoOffsetY').value || '0';
        let headerBackgroundLayers = '';
    
        if (headerLogoURL) {
            document.getElementById('headerLogoSizeGroup').style.display = 'block';
            document.getElementById('headerLogoPositionGroup').style.display = 'block';
    
            let positionX = '';
            if (headerLogoAlignment === 'left') {
                positionX = 'calc('+headerLogoOffsetX+'px)';
            } else if (headerLogoAlignment === 'center') {
                positionX = 'calc(50% + '+headerLogoOffsetX+'px - '+(headerLogoWidth/2)+'px)';
            } else if (headerLogoAlignment === 'right') {
                positionX = 'calc(100% - '+headerLogoWidth+'px - '+headerLogoOffsetX+'px)';
            }
            const positionY = headerLogoOffsetY+'px';
            const headerLogoWidthPx = headerLogoWidth + 'px';
    
            headerBackgroundLayers = 'url("'+headerLogoURL+'") '+positionX+' '+positionY+' / '+headerLogoWidthPx+' no-repeat, '+headerBackgroundLayer;
        } else {
            document.getElementById('headerLogoSizeGroup').style.display = 'none';
            document.getElementById('headerLogoPositionGroup').style.display = 'none';
            root.setProperty('--headerPaddingLeft', '20px');
            headerBackgroundLayers = headerBackgroundLayer;
        }
        root.setProperty('--headerBackgroundLayers', headerBackgroundLayers);
    
        const chatAreaBackgroundType = document.getElementById('chatAreaBackgroundType').value;
        if (chatAreaBackgroundType === 'solid') {
            const chatAreaBgSolid = document.getElementById('chatAreaBgSolid').value;
            root.setProperty('--chatAreaBackgroundColor', chatAreaBgSolid);
            root.setProperty('--chatAreaBackgroundImage', 'none');
            root.setProperty('--chatAreaGradient', 'none');
        } else if (chatAreaBackgroundType === 'gradient') {
            const chatAreaBgGradientStart = document.getElementById('chatAreaBgGradientStart').value;
            const chatAreaBgGradientEnd = document.getElementById('chatAreaBgGradientEnd').value;
            const chatAreaBgGradientDirection = document.getElementById('chatAreaBgGradientDirection').value;
            root.setProperty('--chatAreaBackgroundColor', 'transparent');
            root.setProperty('--chatAreaBackgroundImage', 'linear-gradient('+chatAreaBgGradientDirection+','+chatAreaBgGradientStart+','+chatAreaBgGradientEnd+')');
            root.setProperty('--chatAreaBackgroundPosition', 'center');
            root.setProperty('--chatAreaBackgroundRepeat', 'no-repeat');
            root.setProperty('--chatAreaBackgroundSize', 'cover');
            root.setProperty('--chatAreaGradient', 'none');
        } else if (chatAreaBackgroundType === 'image') {
            const chatAreaBgImageURL = document.getElementById('chatAreaBgImageURL').value;
            const chatAreaBgSize = document.getElementById('chatAreaBgSize').value;
            const chatAreaBgRepeat = document.getElementById('chatAreaBgRepeat').value;
            const gradientSelector = document.getElementById('gradientSelector').value;
            const slidergradientTransparency = document.getElementById('slidergradientTransparency').value;
            if (chatAreaBgImageURL) {
                root.setProperty('--chatAreaBackgroundColor', 'transparent');
                root.setProperty('--chatAreaBackgroundImage', 'url("'+chatAreaBgImageURL+'")');
                root.setProperty('--chatAreaBackgroundSize', chatAreaBgSize);
                root.setProperty('--chatAreaBackgroundRepeat', chatAreaBgRepeat);
                root.setProperty('--chatAreaBackgroundPosition', 'center');
    
                const gradientOpacity = slidergradientTransparency / 100;
                let gradientColor;
                if (gradientSelector === 'light') {
                    gradientColor = 'linear-gradient(to bottom, rgba(255, 255, 255, '+gradientOpacity+'), rgba(255, 255, 255, '+gradientOpacity+'))';
                } else if (gradientSelector === 'dark') {
                    gradientColor = 'linear-gradient(to bottom, rgba(0, 0, 0, '+gradientOpacity+'), rgba(0, 0, 0, '+gradientOpacity+'))';
                } else {
                    gradientColor = 'none';
                }
                root.setProperty('--chatAreaGradient', gradientColor);
            }
        }
    
        const messageTextSizeValue = document.getElementById('messageTextSize').value;
        const messageTextSize = messageTextSizeValue + 'px';
        root.setProperty('--messageTextSize', messageTextSize);
        root.setProperty('--buttonTextSize', messageTextSize);
        const botMessageCornerStyleSelect = document.getElementById('botMessageCornerStyleSelect').value;
        const userMessageCornerStyleSelect = document.getElementById('userMessageCornerStyleSelect').value;
    
        let botCornerValue = botMessageCornerStyleSelect;
        if (botMessageCornerStyleSelect === 'custom') {
            const tl = document.getElementById('customBotMessageCornerTopLeft').value;
            const tr = document.getElementById('customBotMessageCornerTopRight').value;
            const br = document.getElementById('customBotMessageCornerBottomRight').value;
            const bl = document.getElementById('customBotMessageCornerBottomLeft').value;
            botCornerValue = tl+' '+tr+' '+br+' '+bl;
        }
        root.setProperty('--botMessageCornerStyle', botCornerValue);
    
        let userCornerValue = userMessageCornerStyleSelect;
        if (userMessageCornerStyleSelect === 'custom') {
            const tl = document.getElementById('customUserMessageCornerTopLeft').value;
            const tr = document.getElementById('customUserMessageCornerTopRight').value;
            const br = document.getElementById('customUserMessageCornerBottomRight').value;
            const bl = document.getElementById('customUserMessageCornerBottomLeft').value;
            userCornerValue = tl+' '+tr+' '+br+' '+bl;
        }
        root.setProperty('--userMessageCornerStyle', userCornerValue);
    
        const botMessageTextColor = document.getElementById('botMessageTextColor').value;
        const botMessageBg = document.getElementById('botMessageBg').value;
        const userMessageTextColor = document.getElementById('userMessageTextColor').value;
        const userMessageBg = document.getElementById('userMessageBg').value;
        root.setProperty('--botMessageTextColor', botMessageTextColor);
        root.setProperty('--botMessageBg', botMessageBg);
        root.setProperty('--userMessageTextColor', userMessageTextColor);
        root.setProperty('--userMessageBg', userMessageBg);
        root.setProperty('--fontWeight', 'bold');
    
        const botMessageBorderColor = document.getElementById('botMessageBorderColor').value;
        const botMessageBorderThickness = document.getElementById('botMessageBorderThickness').value + 'px';
        root.setProperty('--botMessageBorderColor', botMessageBorderColor);
        root.setProperty('--botMessageBorderThickness', botMessageBorderThickness);
    
        const userMessageBorderColor = document.getElementById('userMessageBorderColor').value;
        const userMessageBorderThickness = document.getElementById('userMessageBorderThickness').value + 'px';
        root.setProperty('--userMessageBorderColor', userMessageBorderColor);
        root.setProperty('--userMessageBorderThickness', userMessageBorderThickness);
    
        const showAvatar = document.getElementById('showAvatar').checked;
        root.setProperty('--avatarDisplay', showAvatar ? 'inline-block' : 'none');
        root.setProperty('--avatarSize', document.getElementById('avatarSize').value + 'px');
        const avatarBorderColor = document.getElementById('avatarBorderColor').value;
        const avatarBorderThickness = document.getElementById('avatarBorderThickness').value + 'px';
        const avatarBorderTransparent = document.getElementById('avatarBorderTransparent').checked;
        root.setProperty('--avatarBorderColor', avatarBorderTransparent ? 'transparent' : avatarBorderColor);
        root.setProperty('--avatarBorderThickness', avatarBorderThickness);
        const avatarURL = document.getElementById('avatarImageURL').value;
        root.setProperty('--avatarImageURL', avatarURL ? 'url("'+avatarURL+'")' : 'none');
        root.setProperty('--avatarShape', document.getElementById('avatarShape').value);
    
        if (showAvatar) {
            const avatarSizeValue = document.getElementById('avatarSize').value;
            root.setProperty('--otherMessagePaddingLeft', 'calc('+avatarSizeValue+'px + 10px)');
        } else {
            root.setProperty('--otherMessagePaddingLeft', '0px');
        }
    
        const showIcons = document.getElementById('showIcons').checked;
        const iconColor = document.getElementById('icon-color').value;
        const iconColorSend = document.getElementById('icon-color-send').value;
        root.setProperty('--iconsDisplay', showIcons ? 'inline-block' : 'none');
        root.setProperty('--iconsColor', iconColor);
        root.setProperty('--iconsColorSend', iconColorSend);
    
        const chatInputBackgroundType = document.getElementById('chatInputBackgroundType').value;
        const chatInputTextFieldBg = document.getElementById('chatInputTextFieldBg').value;
        const chatInputTextFieldTextColor = document.getElementById('chatInputTextFieldTextColor').value;
        const chatInputCornerStyle = document.getElementById('chatInputCornerStyle').value;
    
        root.setProperty('--chatInputTextFieldBg', chatInputTextFieldBg);
        root.setProperty('--chatInputTextFieldTextColor', chatInputTextFieldTextColor);
        root.setProperty('--chatInputBorderRadius', chatInputCornerStyle);
    
        if (chatInputBackgroundType === 'solid') {
            const chatInputBgSolid = document.getElementById('chatInputBgSolid').value;
            root.setProperty('--chatInputBackground', chatInputBgSolid);
        } else {
            const chatInputBgGradientStart = document.getElementById('chatInputBgGradientStart').value;
            const chatInputBgGradientEnd = document.getElementById('chatInputBgGradientEnd').value;
            const chatInputBgGradientDirection = document.getElementById('chatInputBgGradientDirection').value;
            root.setProperty('--chatInputBackground', 'linear-gradient('+chatInputBgGradientDirection+','+chatInputBgGradientStart+','+chatInputBgGradientEnd+')');
        }
    
        updateFooterSettings();
        generateCSS();
        saveSettings();
    }
    
    function updateFooterSettings() {
        footerSettings.showFooter = document.getElementById('footer-show').checked;
        footerSettings.footerText = document.getElementById('footer-text').value;
        footerSettings.footerTextColor = document.getElementById('footer-text-color').value;
        footerSettings.footerFontSize = document.getElementById('footer-font-size').value;
        footerSettings.footerFontFamily = document.getElementById('footer-font-family').value;
        footerSettings.footerFontWeight = document.getElementById('footer-font-weight').value;
    
        let footerCSS = '';
        if (footerSettings.showFooter) {
            footerCSS = '.chat-input:before{content:"'+footerSettings.footerText+'";position:absolute;bottom:1px;color:'+footerSettings.footerTextColor+';font-size:'+footerSettings.footerFontSize+'px;font-family:'+footerSettings.footerFontFamily+';font-weight:'+footerSettings.footerFontWeight+';padding:1px 5px;left:50%;transform:translateX(-50%);white-space:nowrap;}.d-flex.align-items-center.w-100{padding-bottom:2vh;}';
        } else {
            footerCSS = '.chat-input:before{content:"";}';
        }
    
        const styleTag = document.getElementById('footerStyles');
        if (styleTag) {
            styleTag.innerHTML = footerCSS.trim();
        } else {
            const newStyleTag = document.createElement('style');
            newStyleTag.id = 'footerStyles';
            newStyleTag.innerHTML = footerCSS.trim();
            document.head.appendChild(newStyleTag);
        }
    
        generateCSS();
    }
    
    function saveSettings() {
        const settings = {};
        document.querySelectorAll('.controls input, .controls select, .controls textarea').forEach(input => {
            if (input.type === 'checkbox') {
                settings[input.id] = input.checked;
            } else {
                settings[input.id] = input.value;
            }
        });
        localStorage.setItem('chatCustomizationSettings', JSON.stringify(settings));
    }
    
    function loadSettings() {
        const settings = localStorage.getItem('chatCustomizationSettings');
        if (settings) {
            const parsedSettings = JSON.parse(settings);
            document.querySelectorAll('.controls input, .controls select, .controls textarea').forEach(input => {
                if (input.id in parsedSettings) {
                    if (input.type === 'checkbox') {
                        input.checked = parsedSettings[input.id];
                    } else {
                        input.value = parsedSettings[input.id];
                    }
                }
            });
            document.getElementById('headerBackgroundType').dispatchEvent(new Event('change'));
            document.getElementById('chatAreaBackgroundType').dispatchEvent(new Event('change'));
            document.getElementById('chatInputBackgroundType').dispatchEvent(new Event('change'));
            document.getElementById('headerLogoURL').dispatchEvent(new Event('input'));
            document.getElementById('avatarBorderTransparent').dispatchEvent(new Event('change'));
            document.getElementById('showIcons').dispatchEvent(new Event('change'));
            document.getElementById('botMessageCornerStyleSelect').dispatchEvent(new Event('change'));
            document.getElementById('userMessageCornerStyleSelect').dispatchEvent(new Event('change'));
            updateFooterSettings();
            updatePreview();
        }
    }
    
    function resetSettings() {
        if (confirm('Are you sure you want to reset to default settings?')) {
            localStorage.removeItem('chatCustomizationSettings');
            window.location.reload();
        }
    }
    
    function copyCSS() {
        const cssOutput = document.getElementById('cssOutput');
        cssOutput.select();
        cssOutput.setSelectionRange(0, 99999);
        document.execCommand('copy');
    
        const successMessage = document.getElementById('successMessage');
        successMessage.style.display = 'block';
        setTimeout(() => { successMessage.style.display = 'none'; }, 2000);
    }
    
    function syncColorInputs(colorPickerId, textInputId) {
        const colorPicker = document.getElementById(colorPickerId);
        const textInput = document.getElementById(textInputId);
        colorPicker.addEventListener('input', () => {
            textInput.value = colorPicker.value.toUpperCase();
            updatePreview();
        });
        textInput.addEventListener('input', () => {
            let value = textInput.value.trim().toUpperCase();
            if (!value.startsWith('#')) {
                value = '#'+value;
            }
            if (/^#([0-9A-F]{3}){1,2}$/i.test(value)) {
                colorPicker.value = value;
                textInput.value = value;
                updatePreview();
            }
        });
    }
    
    const colorInputPairs = [
        ['headerTextColor', 'headerTextColorText'],
        ['headerBgSolid', 'headerBgSolidText'],
        ['headerBgGradientStart', 'headerBgGradientStartText'],
        ['headerBgGradientEnd', 'headerBgGradientEndText'],
        ['chatAreaBgSolid', 'chatAreaBgSolidText'],
        ['chatAreaBgGradientStart', 'chatAreaBgGradientStartText'],
        ['chatAreaBgGradientEnd', 'chatAreaBgGradientEndText'],
        ['botMessageTextColor', 'botMessageTextColorText'],
        ['botMessageBg', 'botMessageBgText'],
        ['userMessageTextColor', 'userMessageTextColorText'],
        ['userMessageBg', 'userMessageBgText'],
        ['avatarBorderColor', 'avatarBorderColorText'],
        ['icon-color', 'iconColorText'],
        ['icon-color-send', 'iconColorSendText'],
        ['chatInputBgSolid', 'chatInputBgSolidText'],
        ['chatInputBgGradientStart', 'chatInputBgGradientStartText'],
        ['chatInputBgGradientEnd', 'chatInputBgGradientEndText'],
        ['chatInputTextFieldBg', 'chatInputTextFieldBgText'],
        ['chatInputTextFieldTextColor', 'chatInputTextFieldTextColorText'],
        ['footer-text-color', 'footerTextColorText'],
        ['botMessageBorderColor', 'botMessageBorderColorText'],
        ['userMessageBorderColor', 'userMessageBorderColorText']
    ];
    
    colorInputPairs.forEach(([colorPickerId, textInputId]) => {
        syncColorInputs(colorPickerId, textInputId);
    });
    
    document.querySelectorAll('.controls input, .controls select, .controls textarea').forEach(input => {
        input.addEventListener('input', updatePreview);
        input.addEventListener('change', updatePreview);
    });
    
    document.getElementById('headerBackgroundType').addEventListener('change', function() {
        const type = this.value;
        if (type === 'solid') {
            document.getElementById('headerSolidColorGroup').style.display = 'block';
            document.getElementById('headerGradientGroup').style.display = 'none';
        } else {
            document.getElementById('headerSolidColorGroup').style.display = 'none';
            document.getElementById('headerGradientGroup').style.display = 'block';
        }
        updatePreview();
    });
    
    document.getElementById('chatAreaBackgroundType').addEventListener('change', function() {
        const type = this.value;
        if (type === 'solid') {
            document.getElementById('chatAreaSolidColorGroup').style.display = 'block';
            document.getElementById('chatAreaGradientGroup').style.display = 'none';
            document.getElementById('chatAreaImageGroup').style.display = 'none';
            document.getElementById('chatAreaTransparencyGroup').style.display = 'none';
        } else if (type === 'gradient') {
            document.getElementById('chatAreaSolidColorGroup').style.display = 'none';
            document.getElementById('chatAreaGradientGroup').style.display = 'block';
            document.getElementById('chatAreaImageGroup').style.display = 'none';
            document.getElementById('chatAreaTransparencyGroup').style.display = 'none';
        } else if (type === 'image') {
            document.getElementById('chatAreaSolidColorGroup').style.display = 'none';
            document.getElementById('chatAreaGradientGroup').style.display = 'none';
            document.getElementById('chatAreaImageGroup').style.display = 'block';
            document.getElementById('chatAreaTransparencyGroup').style.display = 'block';
        }
        updatePreview();
    });
    
    document.getElementById('chatInputBackgroundType').addEventListener('change', function() {
        const type = this.value;
        if (type === 'solid') {
            document.getElementById('chatInputSolidColorGroup').style.display = 'block';
            document.getElementById('chatInputGradientGroup').style.display = 'none';
        } else {
            document.getElementById('chatInputSolidColorGroup').style.display = 'none';
            document.getElementById('chatInputGradientGroup').style.display = 'block';
        }
        updatePreview();
    });
    
    document.getElementById('botMessageCornerStyleSelect').addEventListener('change', function() {
        if(this.value === 'custom') {
            document.getElementById('customBotMessageCornerGroup').style.display = 'block';
        } else {
            document.getElementById('customBotMessageCornerGroup').style.display = 'none';
        }
        updatePreview();
    });
    
    document.getElementById('userMessageCornerStyleSelect').addEventListener('change', function() {
        if(this.value === 'custom') {
            document.getElementById('customUserMessageCornerGroup').style.display = 'block';
        } else {
            document.getElementById('customUserMessageCornerGroup').style.display = 'none';
        }
        updatePreview();
    });
    
    document.querySelectorAll('.section-title').forEach(title => {
        title.addEventListener('click', function() {
            const currentlyOpen = document.querySelector('.section-content:not([style*="display: none"])');
            const sectionContent = this.nextElementSibling;
            const toggleIcon = this.querySelector('.toggle-icon');
    
            if (sectionContent.style.display === 'none' || sectionContent.style.display === '') {
                if (currentlyOpen && currentlyOpen !== sectionContent) {
                    currentlyOpen.style.display = 'none';
                    currentlyOpen.previousElementSibling.querySelector('.toggle-icon').textContent = '+';
                }
                sectionContent.style.display = 'block';
                toggleIcon.textContent = '-';
            } else {
                sectionContent.style.display = 'none';
                toggleIcon.textContent = '+';
            }
        });
    });
    
    document.addEventListener("DOMContentLoaded", function () {
        const checkbox = document.getElementById("showIcons");
        const iconContainer = document.querySelector(".icon-container");
        const chatInputGroup = document.querySelector(".chat-input .input-group");
    
        function toggleChatInputStyles() {
            if (checkbox.checked) {
                chatInputGroup.style.position = 'absolute';
                chatInputGroup.style.width = '73%';
                chatInputGroup.style.right = 'calc(13% - 50px)';
            } else {
                chatInputGroup.style.position = 'relative';
                chatInputGroup.style.width = '';
                chatInputGroup.style.right = '';
            }
        }
    
        function toggleIconVisibility() {
            if (checkbox.checked) {
                iconContainer.classList.add("active");
            } else {
                iconContainer.classList.remove("active");
            }
        }
    
        toggleChatInputStyles();
        toggleIconVisibility();
    
        checkbox.addEventListener("change", function () {
            toggleIconVisibility();
            toggleChatInputStyles();
            saveSettings();
        });
    });
    
    document.getElementById('footer-show').addEventListener('change', (e) => {
        footerSettings.showFooter = e.target.checked;
        updateFooterSettings();
        generateCSS();
        saveSettings();
    });
    document.getElementById('footer-text').addEventListener('input', (e) => {
        footerSettings.footerText = e.target.value;
        updateFooterSettings();
        generateCSS();
        saveSettings();
    });
    document.getElementById('footer-text-color').addEventListener('input', (e) => {
        footerSettings.footerTextColor = e.target.value;
        updateFooterSettings();
        generateCSS();
        saveSettings();
    });
    document.getElementById('footer-font-size').addEventListener('input', (e) => {
        footerSettings.footerFontSize = e.target.value;
        updateFooterSettings();
        generateCSS();
        saveSettings();
    });
    document.getElementById('footer-font-family').addEventListener('change', (e) => {
        footerSettings.footerFontFamily = e.target.value;
        updateFooterSettings();
        generateCSS();
        saveSettings();
    });
    document.getElementById('footer-font-weight').addEventListener('change', (e) => {
        footerSettings.footerFontWeight = e.target.value;
        updateFooterSettings();
        generateCSS();
        saveSettings();
    });
    
    window.onload = function() {
        loadSettings();
        updatePreview();
    };
    </script>
    </body>
    </html></div></div></body></html>
      